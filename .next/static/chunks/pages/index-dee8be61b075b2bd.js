(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(1787)}])},1787:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return _}});var t=a(5893),i=a(7294),r=a(9669),l=a.n(r),s=a(5503);a(626),a(6690),s.Z.apps.length||s.Z.initializeApp({apiKey:"AIzaSyARYBUhaMozOaLyANk_hgmT7sEfxho7ROc",authDomain:"pantry-management-cb281.firebaseapp.com",projectId:"pantry-management-cb281",storageBucket:"pantry-management-cb281.appspot.com",messagingSenderId:"732628986046",appId:"1:732628986046:web:b6efeba24e23e674f096ef",measurementId:"G-2RN913RMDG"}),s.Z.auth().signInAnonymously().then(()=>{console.log("Signed in anonymously")}).catch(e=>{console.error("Anonymous sign-in failed",e)}),s.Z.apps.length||s.Z.initializeApp({apiKey:"AIzaSyARYBUhaMozOaLyANk_hgmT7sEfxho7ROc",authDomain:"pantry-management-cb281.firebaseapp.com",projectId:"pantry-management-cb281",storageBucket:"pantry-management-cb281.appspot.com",messagingSenderId:"732628986046",appId:"1:732628986046:web:b6efeba24e23e674f096ef",measurementId:"G-2RN913RMDG"}),s.Z.auth().signInAnonymously().then(()=>{console.log("Signed in anonymously")}).catch(e=>{console.error("Anonymous sign-in failed",e)});var o=s.Z,c=a(1291),u=a(6629),d=a(7450),m=a(1789),p=e=>{let{addItem:n}=e,[a,r]=(0,i.useState)(null),[s,p]=(0,i.useState)(!1),[h,f]=(0,i.useState)([]),y=async e=>{if(e.preventDefault(),!a)return;p(!0);let t=o.storage().ref().child("images/".concat(a.name));await t.put(a);let i=await t.getDownloadURL();try{let e=(await l().post("https://us-central1-pantry-management-cb281.cloudfunctions.net/classifyImage",{imageUrl:i})).data,a=e.filter(e=>!["Food","Fruit","Staple food","Natural foods","Superfood","Seedless fruit","Rose family"].includes(e.description)).reduce((e,n)=>e.score>n.score?e:n,{});f(e),a.description?n({name:a.description,quantity:1}):console.error("No valid labels found.")}catch(e){console.error("Error classifying image:",e)}finally{p(!1)}};return(0,t.jsxs)("div",{children:[(0,t.jsxs)("form",{onSubmit:y,children:[(0,t.jsx)(c.Z,{type:"file",onChange:e=>{r(e.target.files[0])}}),(0,t.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",children:s?(0,t.jsx)(d.Z,{size:24}):"Upload and Classify"})]}),h.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(m.Z,{variant:"h6",children:"Classified Labels:"}),(0,t.jsx)("ul",{children:h.map((e,n)=>(0,t.jsxs)("li",{children:[e.description," (Confidence: ",e.score.toFixed(2),")"]},n))})]})]})},h=a(994),f=a(4240),y=a(2122),g=a(8898),x=a(1816),j=a(6853),Z=e=>{let{items:n,onDelete:a,onEdit:i}=e;return(0,t.jsx)(h.Z,{children:n.map((e,n)=>(0,t.jsxs)(f.Z,{children:[(0,t.jsx)(y.Z,{primary:e.name,secondary:"Quantity: ".concat(e.quantity)}),(0,t.jsx)(g.Z,{edge:"end","aria-label":"edit",onClick:()=>i(n),children:(0,t.jsx)(j.Z,{})}),(0,t.jsx)(g.Z,{edge:"end","aria-label":"delete",onClick:()=>a(n),children:(0,t.jsx)(x.Z,{})})]},n))})},b=e=>{let{onAdd:n}=e,[a,r]=(0,i.useState)(""),[l,s]=(0,i.useState)("");return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a&&l&&(n({name:a,quantity:l}),r(""),s(""))},children:[(0,t.jsx)(c.Z,{label:"Item Name",variant:"outlined",value:a,onChange:e=>r(e.target.value),required:!0}),(0,t.jsx)(c.Z,{label:"Quantity",variant:"outlined",value:l,onChange:e=>s(e.target.value),required:!0}),(0,t.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",children:"Add Item"})]})};function v(e){let{value:n,onChange:a}=e;return(0,t.jsx)(c.Z,{label:"Search",variant:"outlined",value:n,onChange:e=>a(e.target.value),fullWidth:!0})}var S=a(1437),C=a(9931),I=a(8243),w=a(7274),A=a(997),_=()=>{let[e,n]=(0,i.useState)([]),[a,r]=(0,i.useState)(null),[l,s]=(0,i.useState)(!1),[o,d]=(0,i.useState)(""),h=e=>{n(n=>[...n,e])},f=e=>{r({...a,[e.target.name]:e.target.value})},y=e.filter(e=>e.name.toLowerCase().includes(o.toLowerCase()));return(0,t.jsxs)(S.Z,{children:[(0,t.jsx)(m.Z,{variant:"h4",children:"Pantry Management"}),(0,t.jsx)(v,{value:o,onChange:d}),(0,t.jsx)(b,{onAdd:h}),(0,t.jsx)(Z,{items:y,onDelete:e=>{n(n=>n.filter((n,a)=>a!==e))},onEdit:n=>{r({...e[n],index:n}),s(!0)}}),(0,t.jsx)(p,{addItem:h}),(0,t.jsxs)(C.Z,{open:l,onClose:()=>s(!1),children:[(0,t.jsx)(I.Z,{children:"Edit Item"}),(0,t.jsxs)(w.Z,{children:[(0,t.jsx)(c.Z,{label:"Name",name:"name",value:(null==a?void 0:a.name)||"",onChange:f,fullWidth:!0}),(0,t.jsx)(c.Z,{label:"Quantity",name:"quantity",value:(null==a?void 0:a.quantity)||"",onChange:f,fullWidth:!0})]}),(0,t.jsxs)(A.Z,{children:[(0,t.jsx)(u.Z,{onClick:()=>s(!1),color:"primary",children:"Cancel"}),(0,t.jsx)(u.Z,{onClick:()=>{n(e=>e.map((e,n)=>n===a.index?{name:a.name,quantity:a.quantity}:e)),s(!1)},color:"primary",children:"Save"})]})]})]})}}},function(e){e.O(0,[834,903,888,774,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);